void 0===window.wpcm.editors&&(window.wpcm.editors=[]),function(e,t){"use strict";e.executableModes=[],e.frontEndInitialization=function(){let t=document.querySelectorAll(".code-block > pre.CodeMirror");e.addNotice();for(let o=0;o<t.length;o++){const n=t[o];if(!n.dataset.setting)continue;let i=JSON.parse(n.dataset.setting),s=n.textContent,d="code-block-"+o;n.parentNode.setAttribute("id",o),n.setAttribute("id",d),e.codeMirrorInit(d,s,i,o)}let o=new CustomEvent("wpcm_editors_loaded");document.dispatchEvent(o)},e.codeMirrorInit=function(o,n,i){const s=document.getElementById(o);s.style="display: none";const d=t(s.parentNode,{lineNumbers:i.lineNumbers,lineWrapping:i.lineWrapping,readOnly:i.readOnly,scrollbarStyle:"simple",firstLineNumber:i.firstLineNumber?Math.abs(i.firstLineNumber):1});if(e.editorOptions.maxHeight){let e=d.getWrapperElement();e.classList.add("max-height"),e.style.setProperty("height",i.maxHeight),e.style.setProperty("padding-bottom","2rem")}t.autoLoadTheme(d,i.theme),d.setValue(n),i.disableCopy&&d.setOption("readOnly","nocursor"),d.setOption("mode",i.mime),d.setOption("theme",i.theme),i.styleActiveLine&&(d.on("blur",(e=>{d.setOption("styleActiveLine",!1)})),d.on("focus",(e=>{d.setOption("styleActiveLine",i.styleActiveLine)}))),t.autoLoadMode(d,i.mode),!0===i.showPanel&&e.panelOptions.showPanel&&(d.getWrapperElement().querySelector(".CodeMirror-simplescroll-vertical"),e.addPanel(d,i)),e.executableModes.includes(i.mode)&&e.renderOutputBlock(s),e.editors.push(d);let c=new CustomEvent("wpcm_editor_loaded",{detail:d});document.dispatchEvent(c)},e.addNotice=function(){const e=document.createElement("div");e.className="CodeMirror-notice",document.body.appendChild(e)},e.showNotice=function(e,t){const o=document.querySelector(".CodeMirror-notice");o.innerHTML=e,o.setAttribute("style","bottom: 15px"),setTimeout((()=>{o.removeAttribute("style")}),3e3)},e.addPanel=function(t,o){const n=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),d=document.createElement("span"),c=t.getWrapperElement();if(n.className="CodeMirror-panel",i.className="info-panel",e.editorOptions.maxHeight&&i.classList.add("max-height"),s.className="control-panel","no"!==o.languageLabel&&(d.textContent=o?.fileName?o.fileName:o.language,d.className="language "+o.modeName.toLowerCase()),i.appendChild(d),window.wpcm.panelOptions.runButton&&e.executableModes.includes(o.mode)){let t=document.createElement("span"),o=document.createElement("b");t.classList="tool",t.setAttribute("data-tip","Execute Code"),o.className="run-code execute-code",t.onclick=e.executeCode,t.appendChild(o),s.appendChild(t)}if(window.wpcm.panelOptions.fullScreenButton){const t=document.createElement("span"),o=document.createElement("b");t.classList="tool",t.setAttribute("data-tip","Full Screen"),o.className="fullscreen maximize",o.onclick=e.setFullScreen,t.appendChild(o),s.appendChild(t)}if(window.wpcm.panelOptions.copyButton&&!o.disableCopy){const t=document.createElement("span"),o=document.createElement("b");t.classList="tool",t.setAttribute("data-tip","Copy Code"),o.className="copy",o.onclick=e.copyToClipboard,t.appendChild(o),s.appendChild(t)}i.appendChild(s),n.appendChild(i),c.insertBefore(n,c.firstChild)},e.executeCode=function(t){const o=this.closest(".code-block"),n=o.id,i=e.editors[n].getValue(),s=o.querySelector(".output-block-frame");let d=null;s.classList.add("show"),d=s.contentWindow?s.contentWindow:s.contentDocument.document?s.contentDocument.document:s.contentDocument,d.setAttribute("sandbox","allow-scripts"),d.document.open(),d.document.write(i),d.document.close(),window.scrollTo({top:s.offsetTop,left:100,behavior:"smooth"})},e.styleOutputBlock=function(e){let t=e.target,o=null,n=0;t.classList.contains("first-load")?t.classList.remove("first-load"):(o=t.contentWindow?t.contentWindow:t.contentDocument.document?t.contentDocument.document:t.contentDocument,t.setAttribute("style","height:200px"),o.document.body?(n=Math.round(o.document.body.scrollHeight)+25,n>200&&t.setAttribute("style",`height:${n}px`)):t.setAttribute("style","height:70vh"))},e.renderOutputBlock=function(t){const o=document.createElement("iframe");o.setAttribute("sandbox","allow-scripts"),o.classList.add("output-block-frame","first-load"),o.onload=e.styleOutputBlock,o.style.height="100px",o.src="",t.parentNode.append(o)},e.setFullScreen=function(){const t=this,o=t.closest(".code-block").id,n=e.editors[o],i=document.getElementById("wpadminbar"),s=t.closest(".CodeMirror");t.classList.contains("maximize")?(t.classList.remove("maximize"),t.classList.add("restore"),s.classList.add("CodeMirror-fullscreen"),void 0!==i&&null!=i&&t.closest(".CodeMirror").style.setProperty("top",`${i.clientHeight}px`),e.editorOptions.maxHeight&&(s.style.removeProperty("height"),s.style.setProperty("padding-bottom","2rem")),document.documentElement.style.setProperty("overflow","hidden")):(t.classList.remove("restore"),t.classList.add("maximize"),s.classList.remove("CodeMirror-fullscreen"),s.style.removeProperty("top"),document.documentElement.style.removeProperty("overflow"),e.editorOptions.maxHeight?s.style.setProperty("height",e.editorOptions.maxHeight):s.style.removeProperty("padding-bottom")),n.refresh()},e.copyToClipboard=function(){const t=this.closest(".code-block").id,o=e.editors[t].getValue();let n;if(window.clipboardData)window.clipboardData.setData("Text",o);else{const e=document.createElement("textarea");e.className="CodeMirror-ClipBoard",document.body.appendChild(e),e.appendChild(document.createTextNode(o)),e.select();try{n=document.execCommand("copy")?"Copied to clipboard":"Can not copied"}catch(e){n="Oops, unable to copy"}e.remove()}e.showNotice(n,"")}}(window.wpcm,window.CodeMirror),wpcm.frontEndInitialization(),window.addEventListener("load",(function(){console.log("window ready"),setTimeout((()=>{for(let e=0;e<wpcm.editors.length;e++)wpcm.editors[e].refresh()}),1500)}),!1);